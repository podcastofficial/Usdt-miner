<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>USDT Miner</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      background:#020617;
      color:#fff;
      font-family:Arial;
      display:flex;
      justify-content:center;
      align-items:center;
      height:100vh;
    }
    .card {
      background:#0b1220;
      padding:25px;
      border-radius:16px;
      width:90%;
      max-width:380px;
      text-align:center;
    }
    button {
      width:100%;
      padding:14px;
      background:#00ff9c;
      border:none;
      border-radius:12px;
      font-size:16px;
      font-weight:bold;
    }
  </style>
</head>
<body>

<div class="card">
  <h2>USDT Miner</h2>
  <p id="user">User:</p>
  <h3 id="bal">0.00 USDT</h3>
  <p id="ref">Referrals: 0</p>
  <button onclick="mine()">Start Mining</button>
</div>

<script>
const tg = Telegram.WebApp;
tg.ready();

const user = tg.initDataUnsafe.user;
const API = "http://YOUR_IP:5000";

fetch(API + "/get_user", {
  method:"POST",
  headers:{"Content-Type":"application/json"},
  body:JSON.stringify({
    user_id:user.id,
    username:user.username
  })
})
.then(r=>r.json())
.then(d=>{
  document.getElementById("user").innerText = "User: " + user.username;
  document.getElementById("bal").innerText = d.balance + " USDT";
  document.getElementById("ref").innerText = "Referrals: " + d.referrals;
});

function mine(){
  fetch(API + "/mine", {
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({user_id:user.id})
  })
  .then(r=>r.json())
  .then(d=>{
    document.getElementById("bal").innerText = d.balance + " USDT";
  });
}
</script>

</body>
</html>
